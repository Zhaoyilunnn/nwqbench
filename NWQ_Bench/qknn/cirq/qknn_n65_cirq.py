import cirq
import numpy as np
from functools import reduce

q = [cirq.NamedQubit('q' + str(i)) for i in range(65)]

circuit = cirq.Circuit(
    cirq.H(q[0]),
    cirq.ry(0.86584834)(q[1]),
    cirq.ry(0.14743545)(q[2]),
    cirq.ry(0.64245885)(q[3]),
    cirq.ry(0.25817201)(q[4]),
    cirq.ry(0.40688468)(q[5]),
    cirq.ry(1.0394706)(q[6]),
    cirq.ry(2.5998695)(q[7]),
    cirq.ry(0.1055923)(q[8]),
    cirq.ry(2.4725444)(q[9]),
    cirq.ry(0.18212307)(q[10]),
    cirq.ry(2.2954319)(q[11]),
    cirq.ry(2.4837325)(q[12]),
    cirq.ry(1.0053865)(q[13]),
    cirq.ry(2.3769598)(q[14]),
    cirq.ry(0.71175862)(q[15]),
    cirq.ry(2.8680846)(q[16]),
    cirq.ry(2.9177723)(q[17]),
    cirq.ry(2.7116586)(q[18]),
    cirq.ry(1.5525267)(q[19]),
    cirq.ry(3.0664089)(q[20]),
    cirq.ry(1.9557245)(q[21]),
    cirq.ry(0.33250542)(q[22]),
    cirq.ry(0.39294631)(q[23]),
    cirq.ry(0.08921268)(q[24]),
    cirq.ry(2.0177685)(q[25]),
    cirq.ry(1.08657)(q[26]),
    cirq.ry(1.6967852)(q[27]),
    cirq.ry(1.9741458)(q[28]),
    cirq.ry(2.954569)(q[29]),
    cirq.ry(2.8135386)(q[30]),
    cirq.ry(0.13754074)(q[31]),
    cirq.ry(1.2504093)(q[32]),
    cirq.ry(0.17780116)(q[33]),
    cirq.ry(3.1166501)(q[34]),
    cirq.ry(1.5933304)(q[35]),
    cirq.ry(1.5154323)(q[36]),
    cirq.ry(0.98146752)(q[37]),
    cirq.ry(0.2271846)(q[38]),
    cirq.ry(0.68798613)(q[39]),
    cirq.ry(1.3090969)(q[40]),
    cirq.ry(2.1192561)(q[41]),
    cirq.ry(2.527927)(q[42]),
    cirq.ry(1.4018773)(q[43]),
    cirq.ry(1.7981196)(q[44]),
    cirq.ry(0.54568437)(q[45]),
    cirq.ry(3.0629303)(q[46]),
    cirq.ry(2.7640781)(q[47]),
    cirq.ry(0.85225091)(q[48]),
    cirq.ry(2.9031715)(q[49]),
    cirq.ry(2.7264022)(q[50]),
    cirq.ry(2.4490761)(q[51]),
    cirq.ry(0.12435028)(q[52]),
    cirq.ry(1.0599252)(q[53]),
    cirq.ry(2.8109149)(q[54]),
    cirq.ry(2.0532561)(q[55]),
    cirq.ry(1.2379397)(q[56]),
    cirq.ry(2.3032082)(q[57]),
    cirq.ry(1.6474646)(q[58]),
    cirq.ry(0.98522003)(q[59]),
    cirq.ry(1.9140947)(q[60]),
    cirq.ry(2.7385181)(q[61]),
    cirq.ry(0.55956924)(q[62]),
    cirq.ry(3.0138218)(q[63]),
    cirq.ry(0.16889234)(q[64]),
    cirq.CSWAP(q[0], q[1], q[33]),
    cirq.CSWAP(q[0], q[2], q[34]),
    cirq.CSWAP(q[0], q[3], q[35]),
    cirq.CSWAP(q[0], q[4], q[36]),
    cirq.CSWAP(q[0], q[5], q[37]),
    cirq.CSWAP(q[0], q[6], q[38]),
    cirq.CSWAP(q[0], q[7], q[39]),
    cirq.CSWAP(q[0], q[8], q[40]),
    cirq.CSWAP(q[0], q[9], q[41]),
    cirq.CSWAP(q[0], q[10], q[42]),
    cirq.CSWAP(q[0], q[11], q[43]),
    cirq.CSWAP(q[0], q[12], q[44]),
    cirq.CSWAP(q[0], q[13], q[45]),
    cirq.CSWAP(q[0], q[14], q[46]),
    cirq.CSWAP(q[0], q[15], q[47]),
    cirq.CSWAP(q[0], q[16], q[48]),
    cirq.CSWAP(q[0], q[17], q[49]),
    cirq.CSWAP(q[0], q[18], q[50]),
    cirq.CSWAP(q[0], q[19], q[51]),
    cirq.CSWAP(q[0], q[20], q[52]),
    cirq.CSWAP(q[0], q[21], q[53]),
    cirq.CSWAP(q[0], q[22], q[54]),
    cirq.CSWAP(q[0], q[23], q[55]),
    cirq.CSWAP(q[0], q[24], q[56]),
    cirq.CSWAP(q[0], q[25], q[57]),
    cirq.CSWAP(q[0], q[26], q[58]),
    cirq.CSWAP(q[0], q[27], q[59]),
    cirq.CSWAP(q[0], q[28], q[60]),
    cirq.CSWAP(q[0], q[29], q[61]),
    cirq.CSWAP(q[0], q[30], q[62]),
    cirq.CSWAP(q[0], q[31], q[63]),
    cirq.CSWAP(q[0], q[32], q[64]),
    cirq.H(q[0]),
    cirq.measure(q[0], key='c00')
)

simulator = cirq.Simulator()
result = simulator.run(circuit, repetitions=1024)
result_dict = dict(result.multi_measurement_histogram(keys=['c00', ]))
keys = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1]), result_dict.keys()))
counts = dict(zip(keys,[value for value in result_dict.values()]))
print(counts)