import cirq
import numpy as np
from functools import reduce

q = [cirq.NamedQubit('q' + str(i)) for i in range(7)]

circuit = cirq.Circuit(
    cirq.H(q[0]),
    cirq.H(q[1]),
    cirq.H(q[2]),
    cirq.H(q[3]),
    cirq.H(q[4]),
    cirq.H(q[5]),
    cirq.H(q[6]),
    cirq.rz(0.061746479)(q[0]),
    cirq.rz(2.7965488)(q[1]),
    cirq.rz(1.2942629)(q[2]),
    cirq.rz(2.7055942)(q[3]),
    cirq.rz(3.0888028)(q[4]),
    cirq.rz(1.2473229)(q[5]),
    cirq.rz(1.8772195)(q[6]),
    cirq.CNOT(q[0], q[1]),
    cirq.rz(2.3067718)(q[1]),
    cirq.CNOT(q[0], q[1]),
    cirq.ry(0.75492671)(q[0]),
    cirq.CNOT(q[1], q[2]),
    cirq.rz(2.5752432)(q[0]),
    cirq.rz(0.53518449)(q[2]),
    cirq.CNOT(q[1], q[2]),
    cirq.ry(2.479805)(q[1]),
    cirq.CNOT(q[2], q[3]),
    cirq.rz(1.2608489)(q[1]),
    cirq.rz(0.18265939)(q[3]),
    cirq.CZ(q[0], q[1]),
    cirq.CNOT(q[2], q[3]),
    cirq.ry(2.4500329)(q[2]),
    cirq.CNOT(q[3], q[4]),
    cirq.rz(2.8002554)(q[2]),
    cirq.rz(0.14356041)(q[4]),
    cirq.CZ(q[0], q[2]),
    cirq.CNOT(q[3], q[4]),
    cirq.ry(0.41270112)(q[3]),
    cirq.CNOT(q[4], q[5]),
    cirq.rz(2.0755942)(q[3]),
    cirq.rz(0.90093914)(q[5]),
    cirq.CZ(q[0], q[3]),
    cirq.CNOT(q[4], q[5]),
    cirq.ry(2.3214174)(q[4]),
    cirq.CNOT(q[5], q[6]),
    cirq.rz(2.4902515)(q[4]),
    cirq.rz(0.70476932)(q[6]),
    cirq.CZ(q[0], q[4]),
    cirq.CNOT(q[5], q[6]),
    cirq.ry(2.5042328)(q[5]),
    cirq.ry(1.0951026)(q[6]),
    cirq.rz(3.0520425)(q[5]),
    cirq.rz(2.7412258)(q[6]),
    cirq.CZ(q[0], q[5]),
    cirq.CZ(q[0], q[6]),
    cirq.ry(0.028464096)(q[0]),
    cirq.CZ(q[1], q[2]),
    cirq.rz(0.67373494)(q[0]),
    cirq.CZ(q[1], q[3]),
    cirq.CZ(q[1], q[4]),
    cirq.CZ(q[1], q[5]),
    cirq.CZ(q[1], q[6]),
    cirq.ry(2.6292019)(q[1]),
    cirq.CZ(q[2], q[3]),
    cirq.rz(2.5904737)(q[1]),
    cirq.CZ(q[2], q[4]),
    cirq.CZ(q[0], q[1]),
    cirq.CZ(q[2], q[5]),
    cirq.CZ(q[2], q[6]),
    cirq.ry(1.5608658)(q[2]),
    cirq.CZ(q[3], q[4]),
    cirq.rz(1.9889345)(q[2]),
    cirq.CZ(q[3], q[5]),
    cirq.CZ(q[0], q[2]),
    cirq.CZ(q[3], q[6]),
    cirq.ry(0.96005601)(q[3]),
    cirq.CZ(q[4], q[5]),
    cirq.rz(0.64122404)(q[3]),
    cirq.CZ(q[4], q[6]),
    cirq.CZ(q[0], q[3]),
    cirq.ry(1.8476801)(q[4]),
    cirq.CZ(q[5], q[6]),
    cirq.rz(0.58436478)(q[4]),
    cirq.ry(1.7380239)(q[5]),
    cirq.ry(1.6633512)(q[6]),
    cirq.CZ(q[0], q[4]),
    cirq.rz(3.1249111)(q[5]),
    cirq.rz(0.82860035)(q[6]),
    cirq.CZ(q[0], q[5]),
    cirq.CZ(q[0], q[6]),
    cirq.ry(2.9818792)(q[0]),
    cirq.CZ(q[1], q[2]),
    cirq.rz(3.0533654)(q[0]),
    cirq.CZ(q[1], q[3]),
    cirq.CZ(q[1], q[4]),
    cirq.CZ(q[1], q[5]),
    cirq.CZ(q[1], q[6]),
    cirq.ry(0.46640615)(q[1]),
    cirq.CZ(q[2], q[3]),
    cirq.rz(0.28833455)(q[1]),
    cirq.CZ(q[2], q[4]),
    cirq.CZ(q[0], q[1]),
    cirq.CZ(q[2], q[5]),
    cirq.CZ(q[2], q[6]),
    cirq.ry(2.3577123)(q[2]),
    cirq.CZ(q[3], q[4]),
    cirq.rz(0.69895019)(q[2]),
    cirq.CZ(q[3], q[5]),
    cirq.CZ(q[0], q[2]),
    cirq.CZ(q[3], q[6]),
    cirq.ry(0.54382)(q[3]),
    cirq.CZ(q[4], q[5]),
    cirq.rz(2.1833943)(q[3]),
    cirq.CZ(q[4], q[6]),
    cirq.CZ(q[0], q[3]),
    cirq.ry(2.1692571)(q[4]),
    cirq.CZ(q[5], q[6]),
    cirq.rz(0.69129634)(q[4]),
    cirq.ry(1.3545207)(q[5]),
    cirq.ry(0.64753279)(q[6]),
    cirq.CZ(q[0], q[4]),
    cirq.rz(1.3572003)(q[5]),
    cirq.rz(2.5361083)(q[6]),
    cirq.CZ(q[0], q[5]),
    cirq.CZ(q[0], q[6]),
    cirq.ry(1.4090181)(q[0]),
    cirq.CZ(q[1], q[2]),
    cirq.rz(2.11687)(q[0]),
    cirq.CZ(q[1], q[3]),
    cirq.CZ(q[1], q[4]),
    cirq.CZ(q[1], q[5]),
    cirq.CZ(q[1], q[6]),
    cirq.ry(0.11502726)(q[1]),
    cirq.CZ(q[2], q[3]),
    cirq.rz(2.1837471)(q[1]),
    cirq.CZ(q[2], q[4]),
    cirq.CZ(q[0], q[1]),
    cirq.CZ(q[2], q[5]),
    cirq.CZ(q[2], q[6]),
    cirq.ry(0.27630981)(q[2]),
    cirq.CZ(q[3], q[4]),
    cirq.rz(2.3212155)(q[2]),
    cirq.CZ(q[3], q[5]),
    cirq.CZ(q[0], q[2]),
    cirq.CZ(q[3], q[6]),
    cirq.ry(1.6033238)(q[3]),
    cirq.CZ(q[4], q[5]),
    cirq.rz(0.62591067)(q[3]),
    cirq.CZ(q[4], q[6]),
    cirq.CZ(q[0], q[3]),
    cirq.ry(0.026473999)(q[4]),
    cirq.CZ(q[5], q[6]),
    cirq.rz(2.9076185)(q[4]),
    cirq.ry(0.33412436)(q[5]),
    cirq.ry(1.7297581)(q[6]),
    cirq.CZ(q[0], q[4]),
    cirq.rz(0.22548423)(q[5]),
    cirq.rz(1.0798938)(q[6]),
    cirq.CZ(q[0], q[5]),
    cirq.CZ(q[0], q[6]),
    cirq.CZ(q[1], q[2]),
    cirq.CZ(q[1], q[3]),
    cirq.CZ(q[1], q[4]),
    cirq.CZ(q[1], q[5]),
    cirq.CZ(q[1], q[6]),
    cirq.CZ(q[2], q[3]),
    cirq.CZ(q[2], q[4]),
    cirq.CZ(q[2], q[5]),
    cirq.CZ(q[2], q[6]),
    cirq.CZ(q[3], q[4]),
    cirq.CZ(q[3], q[5]),
    cirq.CZ(q[3], q[6]),
    cirq.CZ(q[4], q[5]),
    cirq.CZ(q[4], q[6]),
    cirq.CZ(q[5], q[6]),
    cirq.measure(q[0], key='meas0'),
    cirq.measure(q[1], key='meas1'),
    cirq.measure(q[2], key='meas2'),
    cirq.measure(q[3], key='meas3'),
    cirq.measure(q[4], key='meas4'),
    cirq.measure(q[5], key='meas5'),
    cirq.measure(q[6], key='meas6')
)

simulator = cirq.Simulator()
result = simulator.run(circuit, repetitions=1024)
result_dict = dict(result.multi_measurement_histogram(keys=['meas0', 'meas1', 'meas2', 'meas3', 'meas4', 'meas5', 'meas6']))
keys = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1]), result_dict.keys()))
counts = dict(zip(keys,[value for value in result_dict.values()]))
print(counts)